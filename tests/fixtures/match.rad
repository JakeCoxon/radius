import compiler for Some, None, Option

fn test_basic():
  let y = Some(1)

  let x = Some(1).match {
    Some(z) if z > 0: z + 2
    Some(z) if z == 0: 0
    None(): 100
  }
  print(x)

fn test_tuple():
  let x = (1, 2, true).match {
    (2, w, true): 23
    (z, 2, true) if z > 0: 1
    (z, w, true) if z > w: 2
    (z, w, y) if z < w: 3
  }
  print(x)


fn test_nested_tuple():

  let y = (Some(1), Some(3))
  let x = y.match {
    (Some(z), None()) if z > 0: z + 2
    (Some(z), None()) if z > 0: z
    (Some(z), Some(w)) if z > 0: z + w
  }

  print(x)

fn test_nested():
  let y = Some(1)

  # let x = y.match 'a {
  #   is Some(z): z.match 'b {
  #     is % == 0: z + 2
  #     is % > 0: 0
  #   }
  #   is None(): 3
  # }
  # print(x)


fn main():
  test_basic()
  test_tuple()
  test_nested_tuple()